(function(t){function e(e){for(var a,r,l=e[0],s=e[1],c=e[2],p=0,d=[];p<l.length;p++)r=l[p],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&d.push(i[r][0]),i[r]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,l=1;l<n.length;l++){var s=n[l];0!==i[s]&&(a=!1)}a&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={app:0},o=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/AudioPlayer/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=s;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"056d":function(t,e,n){},"0ad1":function(t,e,n){"use strict";n("056d")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=(n("d3b7"),n("bc3a")),o=n.n(i),r={baseURL:"http://public-apis.langnang.ml",timeout:6e4},l=o.a.create(r);l.interceptors.request.use((function(t){return t}),(function(t){return Promise.reject(t)})),l.interceptors.response.use((function(t){return 200==t.status&&200==t.data.status?t.data.data:Promise.reject(t)}),(function(t){return Promise.reject(t)})),Plugin.install=function(t){t.axios=l,window.axios=l,Object.defineProperties(t.prototype,{axios:{get:function(){return l}},$axios:{get:function(){return l}}})},a["default"].use(Plugin);var s=l,c=n("ecee"),u=n("c074"),p=n("b702"),d=n("f2d1"),f=n("ad3d");c["c"].add(u["a"],p["a"],d["a"]),a["default"].component("font-awesome-icon",f["a"]),a["default"].component("font-awesome-layers",f["b"]),a["default"].component("font-awesome-layers-text",f["c"]);var y=n("5c96"),m=n.n(y);n("0fae");a["default"].use(m.a);var h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("el-menu",{attrs:{mode:"horizontal",router:!0,"default-active":t.activeMenu,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",size:"mini"}},[n("el-menu-item",{attrs:{index:"/"}},[t._v("首页")]),n("el-menu-item",{attrs:{index:"/toplist"}},[t._v("排行榜")])],1),n("keep-alive",[n("router-view",{attrs:{"current-time":t.currentTime},on:{play:function(e){return t.$refs["player"].onPlay(0)}}})],1),n("AudioPlayer",{ref:"player",attrs:{"src-list":[t.song],"src-key":"url"},on:{playing:t.playing,"play-prev":t.onPlayPrev,"play-next":t.onPlayNext,ended:t.onEnded}})],1)},g=[],b=n("5530"),v=n("2f62"),_={name:"App",components:{},data:function(){return{activeMenu:this.$route.path,currentTime:null}},computed:Object(b["a"])({},Object(v["b"])(["song"])),created:function(){},methods:{playing:function(t){this.currentTime=t},onPlayNext:function(){this.$store.dispatch("playNext")},onPlayPrev:function(){this.$store.dispatch("playPrev")},onEnded:function(){var t=this;this.$store.dispatch("playNext").then((function(){t.$refs["player"].onPlay(0)}))}}},w=_,x=(n("5c0b"),n("2877")),P=Object(x["a"])(w,h,g,!1,null,null,null),S=P.exports,T=n("8c4f"),$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{staticStyle:{margin:"0"},attrs:{gutter:20}},[n("el-col",{attrs:{span:14}},[n("el-scrollbar",{staticStyle:{height:"calc(100vh - 125px)"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.playlist,"show-header":!1,"row-class-name":t.tableRowClassName}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),n("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[n("label",[t._v(t._s(e.row.name))]),n("span",{staticClass:"audio-play__button-group"},[n("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-video-play",circle:""},on:{click:function(n){return t.onRowPlay(e.row)}}})],1)]}}])}),n("el-table-column",{attrs:{label:"时长","show-overflow-tooltip":"",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(parseInt(e.row.dt/1e3/60))+" ")]}}])}),n("el-table-column",{attrs:{"show-overflow-tooltip":"",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.ar,(function(e){return n("span",{key:e.id},[t._v(t._s(e.name))])}))}}])})],1)],1)],1),n("el-col",{attrs:{span:10}},[n("div",{staticClass:"audio-info"},[t.song.cover?n("div",{staticClass:"audio-info__cover",class:{active:t.isPlaying}},[n("img",{attrs:{src:t.audio.cover}})]):t._e(),t.song.album?n("div",{staticClass:"audio-info__album"},[t._v(" "+t._s(t.audio.album)+" ")]):t._e(),t.song.author?n("div",{staticClass:"audio-info__author"},[t._v(" "+t._s(t.audio.singer)+" ")]):t._e(),n("AudioLyric",{attrs:{lyric:t.song.lyric,"current-time":t.currentTime}})],1)])],1)},O=[],j=(n("c740"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"audio-lyric"},[n("div",{staticClass:"audio-info__lyric"},[n("el-scrollbar",{ref:"lyricScrollbar",staticStyle:{height:"calc(100vh - 250px)"}},[n("ul",{ref:"lyric",staticClass:"audio-info__lyric-group",staticStyle:{"list-style":"none"}},t._l(t.split_lyric,(function(e,a){return n("li",{key:a,staticClass:"audio-info__lyric-item",class:{active:a==t.currentIndex}},[t._v(" "+t._s(e.lyric)+" ")])})),0)])],1)])}),k=[],I=(n("a9e3"),n("159b"),n("ac1f"),n("1276"),{name:"AudioLyric",props:{currentTime:{type:Number,default:null},lyric:{type:String,default:null}},data:function(){return{}},computed:{split_lyric:function(){var t=[];return this.lyric?(this.lyric.split(/\n/).forEach((function(e){var n={start:null,lyric:e,end:null},a=e.indexOf("["),i=e.indexOf("]");-1!=a&&(n.start=0,n.start+=60*parseInt(e.substr(a+1,2)),n.start+=parseInt(e.substr(a+4,2)),n.start+=.01*parseInt(e.substr(a+7,2)),n.lyric=n.lyric.substr(i+1)),""!=n.lyric&&t.push(n)})),t):[]},currentIndex:function(){var t=this,e=this.split_lyric.findIndex((function(e){return e.start>t.currentTime}));return e-1}},methods:{},watch:{currentIndex:function(t){this.$refs.lyric.style.transform="translateY(".concat(330-25*(t+1),"px)")}}}),C=I,E=(n("c0db"),Object(x["a"])(C,j,k,!1,null,"021767a0",null)),N=E.exports,A={props:{currentTime:{}},components:{AudioLyric:N},data:function(){return{}},computed:Object(b["a"])({},Object(v["b"])(["playlist","song"])),created:function(){},methods:{tableRowClassName:function(t){return t.row.id===this.song.id?"active":""},onTableRowClick:function(t){var e=this.audio_list.findIndex((function(e){return e==t}));this.$store.commit("audio/SET_ITEM",t),this.$refs.player.currentIndex=e},onRowPlay:function(t){var e=this;this.$store.dispatch("getSong",t.id).then((function(){e.$emit("play")}))}}},L=A,D=(n("0ad1"),Object(x["a"])(L,$,O,!1,null,"71827b81",null)),M=D.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",[n("el-form",{attrs:{"label-width":"80px",size:"mini"}},[n("el-form-item",{attrs:{label:"平台"}},[n("el-radio-group",{model:{value:t.platform,callback:function(e){t.platform=e},expression:"platform"}},[n("el-radio-button",{attrs:{label:"网易云"}})],1)],1),n("el-form-item",{attrs:{label:"榜单"}},[n("el-radio-group",{on:{change:t.handleChangeToplist},model:{value:t.toplist.active,callback:function(e){t.$set(t.toplist,"active",e)},expression:"toplist.active"}},t._l(t.toplist.data,(function(e){return n("el-radio-button",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name)+"}")])})),1)],1),n("el-form-item",[n("el-button",{attrs:{disabled:0==t.playlist.tableData.length},on:{click:t.handlePlay}},[t._v("播放")]),n("el-button",{attrs:{disabled:0==t.playlist.tableData.length},on:{click:t.handleAddtoPlaylist}},[t._v("添加至播放列表")])],1)],1),n("el-col",{attrs:{span:24}},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.playlist.loading,expression:"playlist.loading"}],attrs:{data:t.playlist.tableData,size:"mini","max-height":"621px"}},[n("el-table-column",{attrs:{type:"index",width:"50"}}),n("el-table-column",{attrs:{prop:"name",label:"标题","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{label:"时长","show-overflow-tooltip":"",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(parseInt(e.row.dt/1e3/60))+":"+t._s(parseInt(e.row.dt/1e3)%60>9?parseInt(e.row.dt/1e3)%60:"0"+parseInt(e.row.dt/1e3)%60)+" ")]}}])}),n("el-table-column",{attrs:{label:"歌手","show-overflow-tooltip":"",width:"280px"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.ar,(function(e){return n("span",{key:e.id},[t._v(t._s(e.name))])}))}}])})],1)],1)],1)},z=[],B=function(){return s({method:"get",url:"music.163/toplist"})},Y=function(t){return s({method:"get",url:"music.163/playlist",params:{id:t}})},q=function(t){return s({method:"get",url:"music.163/song",params:{id:t}})},J={name:"toplist",data:function(){return{platform:"网易云",toplist:{active:"",data:[]},playlist:{active:"",tableData:[],loading:!1}}},computed:{},created:function(){this.getToplist()},methods:{getToplist:function(){var t=this;B().then((function(e){t.toplist.data=e,t.toplist.active=e[0].id,t.getPlaylist(e[0].id)}))},getPlaylist:function(){var t=this,e=this.toplist.active;this.playlist.loading=!0,Y(e).then((function(e){t.playlist.tableData=e,t.playlist.loading=!1}))},handleChangeToplist:function(){this.getPlaylist()},handlePlay:function(){var t=this;this.$confirm("此操作将替换当前播放列表, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$store.commit("SET_PLAY_LIST",t.playlist.tableData),t.$message({type:"success",message:"添加成功!"})})).catch((function(){t.$message({type:"info",message:"已取消添加"})}))},handleAddtoPlaylist:function(){var t=this;this.$confirm("此操作将排行榜添加至当前播放列表, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$store.dispatch("pushPlaylist",t.playlist.tableData),t.$message({type:"success",message:"添加成功!"})})).catch((function(){t.$message({type:"info",message:"已取消添加"})}))}},watch:{"$route.query.id":function(t){t&&(console.log(t),console.log(this),this.$store.dispatch("getToplist",this.$route.query))}}},G=J,U=Object(x["a"])(G,R,z,!1,null,null,null),F=U.exports;a["default"].use(T["a"]);var H=new T["a"]({mode:"hash",routes:[{path:"/",component:M},{path:"/toplist",component:F},{path:"*",component:M}]}),K=n("2909"),Q=(n("99af"),n("0e44")),V={playlist:function(t){return t.playlist.length?t.playlist:[]},song:function(t){return t.song}};a["default"].use(v["a"]);var W=new v["a"].Store({modules:{playlist:[],song:{}},mutations:{SET_PLAY_LIST:function(t,e){localStorage.setItem("playlist",JSON.stringify(e)),t.playlist=e},SET_SONG:function(t,e){t.song=e}},getters:V,actions:{pushPlaylist:function(t,e){var n=t.state,a=t.commit;a("SET_PLAY_LIST",[].concat(Object(K["a"])(n.playlist.length?n.playlist:[]),Object(K["a"])(e)))},getSong:function(t,e){var n=t.commit;return q(e).then((function(t){return n("SET_SONG",t),Promise.resolve(t)}))},playNext:function(t){var e=t.state,n=t.dispatch,a=e.playlist.findIndex((function(t){return t.id==e.song.id}));return a==e.playlist.length-1?a=0:a++,n("getSong",e.playlist[a].id)},playPrev:function(t){var e=t.state,n=t.dispatch,a=e.playlist.findIndex((function(t){return t.id==e.song.id}));return 0==a?a=e.playlist.length-1:a--,n("getSong",e.playlist[a].id)}},plugins:[Object(Q["a"])()]}),X=n("0ae6"),Z=n.n(X);n("8a01");a["default"].config.productionTip=!1,a["default"].use(n("7876")),a["default"].use(Z.a),new a["default"]({router:H,store:W,render:function(t){return t(S)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";n("9c0c")},"723f":function(t,e,n){},"9c0c":function(t,e,n){},c0db:function(t,e,n){"use strict";n("723f")}});
//# sourceMappingURL=app.7ab13572.js.map